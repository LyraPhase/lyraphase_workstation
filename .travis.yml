language: ruby
gemfile:
   - test/support/Gemfile.ci
rvm:
  - 1.9.3
  - 2.0.0
  - 2.1
  - 2.0.0
  - 2.1
  - 2.2
script:
  - bundle exec rake knife
  - bundle exec rake foodcritic
  - bundle exec rake chefspec
env:
  - CHEF_VERSION=master
  - CHEF_VERSION=12.4.3
  - CHEF_VERSION=12.4.0
  - CHEF_VERSION=12.3.0
  - CHEF_VERSION=12.2.1
  - CHEF_VERSION=12.1.2
  - CHEF_VERSION=12.1.1
  - CHEF_VERSION=12.1.0
  - CHEF_VERSION=12.0.3
  - CHEF_VERSION=11.18.6
  - CHEF_VERSION=11.18.0
  - CHEF_VERSION=11.16.4
  - CHEF_VERSION=11.16.2
  - CHEF_VERSION=11.16.0
  - CHEF_VERSION=11.14.6
  - CHEF_VERSION=11.14.2
matrix:
  fast_finish: true
  allow_failures:
    - env: CHEF_VERSION=master
  exclude:
    - rvm: 1.9.3
      env: CHEF_VERSION=master
    - rvm: 1.9.3
      env: CHEF_VERSION=12.4.3
    - rvm: 1.9.3
      env: CHEF_VERSION=12.4.0
    - rvm: 1.9.3
      env: CHEF_VERSION=12.3.0
    - rvm: 1.9.3
      env: CHEF_VERSION=12.2.1
    - rvm: 1.9.3
      env: CHEF_VERSION=12.1.2
    - rvm: 1.9.3
      env: CHEF_VERSION=12.1.1
    - rvm: 1.9.3
      env: CHEF_VERSION=12.1.0
    - rvm: 1.9.3
      env: CHEF_VERSION=12.0.3